/*
 * contactable 1.5 - jQuery Ajax contact form
 *
 * Copyright (c) 2009 Philip Beel (http://www.theodin.co.uk/)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) 
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Revision: $Id: jquery.contactable.min.js 2012-05-26 $
 *
 */

(function(a){a.fn.contactable=function(b){var c={url:"mail.php",name:"Name",email:"Email",dropdownTitle:"",dropdownOptions:["General","Website bug","Feature request"],message:"Message",subject:"A contactable message",submit:"SEND",recievedMsg:"Thank you for your message",notRecievedMsg:"Sorry but your message could not be sent, try again later",disclaimer:"Please feel free to get in touch, we value your feedback",hideOnSubmit:true};var b=a.extend(c,b);return this.each(function(){function g(){a(".contactable-holder").hide();a("#contactable-loading").show();a.ajax({type:"POST",url:b.url,data:{ContactableForm:true,subject:b.subject,name:a("#contactable-name").val(),email:a("#contactable-email").val(),issue:a("#contactable-dropdown").val(),message:a("#contactable-message").val()},success:function(c){a("#contactable-loading").css({display:"none"});if(c.response==="success"){a("#contactable-callback").show().append(b.recievedMsg);if(b.hideOnSubmit===true){a("#contactable-contactForm").animate({dummy:1},2e3).animate({marginLeft:"-=450px"},"slow");a("#contactable-inner").animate({dummy:1},2e3).animate({marginLeft:"-=447px"},"slow").animate({marginLeft:"+=5px"},"fast");a("#contactable-overlay").css({display:"none"})}}else{a("#contactable-callback").show().append(b.notRecievedMsg);setTimeout(function(){a(".contactable-holder").show();a("#contactable-callback").hide().html("")},2e3)}},error:function(c){a("#contactable-loading").css({display:"none"});a("#contactable-callback").show().append(b.notRecievedMsg)}})}var c="",d=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,e=b.dropdownOptions.length,f;if(b.dropdownTitle){c+='<p><label for="contactable-dropdown">'+b.dropdownTitle+' </label><br /><select name="dropdown" id="contactable-dropdown" class="contactable-dropdown">';for(f=0;f<e;f++){c+='<option value="'+b.dropdownOptions[f]+'">'+b.dropdownOptions[f]+"</option>"}c+="</select></p>"}a(this).html('<div id="contactable-inner"></div><form id="contactable-contactForm" method="" action=""><div id="contactable-loading"></div><div id="contactable-callback"></div><div class="contactable-holder"><p><label for="contactable-name">'+b.name+'<span class="contactable-green"> * </span></label><br /><input id="contactable-name" class="contactable-contact contactable-validate" name="name" /></p><p><label for="contactable-email">'+b.email+' <span class="contactable-green"> * </span></label><br /><input id="contactable-email" class="contactable-contact contactable-validate" name="email" /></p>'+c+'<p><label for="contactable-message">'+b.message+' <span class="contactable-green"> * </span></label><br /><textarea id="contactable-message" name="message" class="contactable-message contactable-validate" rows="4" cols="30" ></textarea></p><p><input class="contactable-submit" type="submit" value="'+b.submit+'"/></p><p class="contactable-disclaimer">'+b.disclaimer+"</p></div></form>");a("#contactable-inner").toggle(function(){a("#contactable-overlay").css({display:"block"});a(this).animate({marginLeft:"-=5px"},"2000");a("#contactable-contactForm").animate({marginLeft:"-=0px"},"2000");a(this).animate({marginLeft:"+=387px"},"4000");a("#contactable-contactForm").animate({marginLeft:"+=390px"},"4000")},function(){a("#contactable-contactForm").animate({marginLeft:"-=390px"},"4000");a(this).animate({marginLeft:"-=387px"},"4000").animate({marginLeft:"+=5px"},"2000");a("#contactable-overlay").css({display:"none"})});a("#contactable-contactForm").submit(function(){var b=true,c;a("#contactable-contactForm .contactable-validate").each(function(){a(this).removeClass("contactable-invalid")});a("#contactable-contactForm .contactable-validate").each(function(){if(a(this).val().length<2){a(this).addClass("contactable-invalid");b=false}if(!d.test(a("#contactable-contactForm #contactable-email").val())){a("#contactable-contactForm #contactable-email").addClass("contactable-invalid");b=false}});if(b===true){g()}return false})})}})(jQuery)